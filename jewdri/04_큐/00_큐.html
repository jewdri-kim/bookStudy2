<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="ko">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<meta name ="format-detection" content ="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>큐(Queue)</title>
<style type="text/css">
body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,textarea,p,blockquote,th,td,input,select,textarea,button {margin:0;padding:0}
a {color:#1b52b1;text-decoration:underline}
a:active, a:hover {text-decoration:underline}

h1 {font-size:18px;padding-top:10px;}
h2 {color:#000b72;font-size:16px;padding-bottom:10px;padding-top:10px;border-bottom:1px solid #d0d0d0;}
h3 {font-size:14px;padding:10px 20px;background:#d0d0d0;}
header h2 {margin-top:20px;font-size:14px;padding:10px 20px;background:#d0d0d0;color:#333;}
h4 {color:#000;padding:10px 20px;border:1px solid #d0d0d0;}

section {padding:10px;}
article {padding:20px;}
xmp {margin:2%;background:#f1f1f1;white-space:pre-line;padding:0 2% 1% 2%;}
pre{margin-bottom:20px;background:#000;white-space:pre-line;padding:1% 2% 1% 2%;color:#ff0;font-size:16px;font-family:tahoma;}
pre span{color:#fff;font-size:14px;}
div{margin-bottom:20px;border:1px solid #d0d0d0;padding:5px 30px;}
ul {padding:10px 0;}
ol {padding-left:20px;}
p {padding-top:10px;}
footer{text-align:right;}
</style>
</head>
<body>
<div class="wrap guide_wrap">
	<header>
		<h1>큐(Queue)</h1>

		<h2>목차</h2>
		<div>
			<ol>
				<li><a href="#con1">큐?</a></li>
				<li><a href="#con2">큐 만들기</a></li>
				<li><a href="#con3">완성된 Queue 클래스</a></li>
				<li><a href="#con4">Queue 클래스 사용</a></li>
				<li><a href="#con5">우선순위 큐</a></li>
				<li><a href="#con6">환형 큐(뜨거운 감자 게임)</a></li>
			</ol>
		</div>
	</header>
	<section>
		<h2 id="con1">큐?</h2>
		<div>
			<ul>
				<li><strong>큐</strong>(Queue)는 <strong>FIFO</strong>(선입선출의 약자)원리에 따라 정렬된 컬렉션</li>
				<li>새 원소는 뒤로 들어가서 앞으로 빠져나가는 구조</li>
				<li>마지막에 추가된 원소는 큐의 뒷부분에서 제일 오래기다려야 한다.</li>
				<li>예 : 줄서기, 컴퓨터(출력물 인쇄대기 - 문서5개 출력시 프린터는 도착한 순서대로 인쇄 시작)</li>
			</ul>
		</div>

		<h2 id="con2">큐 만들기</h2>
		<pre>
			<span>//큐 클래스 작성</span>
			function Queue(){
				this.items = [];
			}
		</pre>

		<h3>큐에서 사용할 메소드</h3>
		<div>
			<ul>
				<li>enqueue : 큐의 뒤쪽에 원소를 추가 </li>
				<li>dequeue : 큐의 첫번쨰 원소 반환후 큐에서 삭제</li>
				<li>front : 큐의 첫번쨰 원소 반환만</li>
				<li>isEmpty : 큐 비어있으면 true, 그게 아니면 false</li>
				<li>size : 큐의 원소개수 반환 (length)</li>
			</ul>
		</div>

		<h3>enqueue</h3>
		<pre>
			Queue.prototype.enqueue = function(element){
				this.items.push(element);
			}
		</pre>

		<h3>dequeue</h3>
		<pre>
			Queue.prototype.dequeue = function(){
				return this.items.shift();
			}
		</pre>

		<h3>front</h3>
		<pre>
			Queue.prototype.front = function(){
				return this.items[0];
			}
		</pre>

		<h3>isEmpty</h3>
		<pre>
			Queue.prototype.isEmpty = function(){
				return this.items.length == 0;
			}
		</pre>

		<h3>size</h3>
		<pre>
			Queue.prototype.size = function(){
				return this.items.length;
			}
		</pre>

		<h3>디버깅용도 print</h3>
		<pre>
			Queue.prototype.print = function(){
				console.log(this.items.toString());
			}
		</pre>

		<h2 id="con3">완성된 Queue 클래스</h2>
		<h3><a href="js/queue.js" target="_blank">queue.js</a></h3>
		<pre>
			function Queue(){
				this.items = [];
			}

			Queue.prototype.enqueue = function(element){
				this.items.push(element);
			}

			Queue.prototype.dequeue = function(){
				return this.items.shift();
			}

			Queue.prototype.front = function(){
				return this.items[0];
			}

			Queue.prototype.isEmpty = function(){
				return this.items.length == 0;
			}

			Queue.prototype.size = function(){
				return this.items.length;
			}

			Queue.prototype.print = function(){
				console.log(this.items.toString());
			}
		</pre>

		<h2 id="con4">Queue 클래스 사용</h2>
		<h3><a href="02_큐클래스사용.html" target="_blank">02_큐클래스사용.html</a></h3>
		<div>
			Queue클래스를 사용하여 대기자명단을 출력하고, 대기자명단 순서에 따라 입장
		</div>
		<h3><a href="02_큐클래스사용_form차이.html" target="_blank">02_큐클래스사용_form차이.html</a></h3>
		<div>
			태그를 form사용하여 button에 이벤트를 줬는데, 폼을 전송하여 문서가 리로드 된다.
			submit을 사용하지 않았는데.-_-?
			<br>
			button태그를 쓰고 submit이라고 하지 않아도, type을 따로 써주지 않으면 디폴트로 submit!<br>
			button type="button" 으로 해결
		</div>

		<h2 id="con5">우선순위 큐</h2>
		<div>
			<ul>
				<li>큐는 일상생활에서도 널리 활용되는 개념 -> 기본 큐를 변형해 사용 </li>
				<li>대표적인 예 : <strong>우선순위 큐</strong> - 원소가 우선순위에 따라 추가되고 삭제</li>
				<li>우선순위큐의 예 : 비행기 1등석, 비즈니스석, 코치석 / 병원 응급실</li>
			</ul>
		</div>

		<h3>우선순위 큐의 종류</h3>
		<div>
			<ul>
				<li>
					우선순위에 따라 원소를 정확한 위치에 추가하는 것

				</li>
				<li>추가는 순서대로 하되, 삭제만 우선순위에 따라 삭제</li>
			</ul>
		</div>

		<h3>우선순위 큐 구현 <a href="js/priorityQueue.js" target="_blank">priorityQueue.js</a></h3>
		<pre>
			function QueueElement(element, priority){
			    this.element = element;
			    this.priority = priority;
			}
			PriorityQueue.prototype.enqueue = function(element, priority){
			    var queueElement = new QueueElement(element,priority);

			    if(this.isEmpty()){ <span>//비어있을경우 그냥추가</span>
			        this.items.push(queueElement);
			    }else{
			        var added = false;

			        <span>//기존에 추가된 원소들과 우선순위 비교후 자리찾아 넣기</span>
			        for(var i=0; i < this.items.length; i++){
			            if(queueElement.priority < this.items[i].priority){
			                this.items.splice(i,0,queueElement);
			                added = true;
			                break;
			            }
			        }
			        <span>//추가될 원소보다 우선순위높은게(숫자작은거) 없을경우 맨앞에 추가</span>
			        if(!added){
			            items.push(queueElement);
			        }
			    }
			}
		</pre>
		<div>다른 메소드들은 똑같지만, 원소 추가될때 우선순위를 비교</div>

		<h3>우선순위 큐를 사용하여 오류사항 리포트 구현<a href="03_우선순위큐.html" target="_blank"> 03_우선순위큐.html</a></h3>
		<div>
			위와같은 로직으로 구현한 우선순위큐를 최소 우선순위 큐 라고 부른다. <br>
			cf)최대우선순위 큐
		</div>


		<h2 id="con6">환형 큐(뜨거운 감자 게임)</h2>
		<div>
			<ul>
				<li>기본큐의 변형</li>
				<li>원을 그리고 서 있는 아이들이 뜨거운 감자를 옆사람에게 최대한 빨리 전달</li>
				<li>일정한횟수만큼 전달하다가 멈췄을때 뜨거운 감자를 손에들고있는 아이를 퇴장</li>
				<li>최후의 1인이 남을때까지 게임은 계속</li>
			</ul>
		</div>
		<h3>뜨거운감자 console창에서 확인 <a href="04_환형큐.html" target="_blank">04_환형큐.html</a></h3>
		<pre>
			function hotPotato(nameList, num){
			var queue = new Queue();

			for(var i = 0; i < nameList.length; i++){
				queue.enqueue(nameList[i]);
			}

			var eliminated = '';
			while(queue.size() > 1){
				for(var i=0; i < num; i++){
					queue.enqueue(queue.dequeue());
				}
				eliminated = queue.dequeue();
				console.log(eliminated+'(을)를 뜨거운 감자게임에서 퇴장시킵니다.');
			}
			return queue.dequeue();
		}

		var names = ['John','Jack','Camila','Ingrid','Carl'];
		var winner = hotPotato(names, 7);
		console.log('승자는 '+winner+'입니다');
		</pre>

		<h3>뜨거운감자 응용 <a href="04_환형큐.html" target="_blank">04_환형큐.html</a></h3>
		<div>뜨거운 감자를 이용하여 술래찾기 </div>
		<pre>
			function CustomHotPotato(area,num){
				this.viewArea = null;
				this.turnNum = null;
				this.personList = null;
				//this.gameAuto = null;
				//this.gameTime = null;
				this.gemeTurn = null;
				this.init(area,num);
			}

			CustomHotPotato.prototype.init = function(area,num){
				this.viewArea = $(area);
				this.turnNum = num;
				//this.gameTime = 1000;
				this.gemeTurn = 0;
				this.personList = new Queue();
			}

			CustomHotPotato.prototype.addList = function(){
				for(var i =0; i < names.length; i++){
					this.personList.enqueue(names[i]);
				}
			}

			CustomHotPotato.prototype.viewList = function(){
				var cont = '<ul>'
				var listTemplate = '<li>{name}</li>'
				for(var i = 0; i < this.personList.size(); i++){
					cont += listTemplate.replace('{name}',this.personList.items[i]);
				}
				cont += '</ul>';
				this.viewArea.html(cont);
			}

			CustomHotPotato.prototype.gameStart = function(){
				this.srchPerson();
				//this.gameAuto = setTimeout(this.srchPerson(),this.gameTime);
			}

			CustomHotPotato.prototype.srchPerson = function(){
				if(this.personList.size() > 1){
					if(this.gemeTurn < this.turnNum){
						this.personList.enqueue(this.personList.dequeue());
						this.gemeTurn += 1;
						this.srchPerson();
					}else{
						var eliminated = this.personList.front();
						var myObj = this;
						//그사람에 해당하는 거 삭제해줘야함
						this.viewArea.find('ul li').each(function(){
							var srchName = $(this).html();
							if(srchName == eliminated){
								$(this).addClass('del').animate({opacity:0},800,function(){
									//alert(eliminated+'탈출');
									myObj.viewArea.prev().append('<p>'+eliminated+'탈출</p>');
									myObj.personList.dequeue();
									myObj.viewList();
									myObj.gemeTurn = 0;
								});
							}
						});

					}
				}else{
					var win = this.personList.dequeue();
					this.viewArea.find('ul li').eq(0).addClass('active');
					alert('술래는 '+win+'입니다');
					//if(this.gameAuto) clearTimeOut(this.gameAuto);
				}


			}
		</pre>
		<pre>
			$(document).ready(function(){
			var addname = prompt('사람 이름 입력(,)구분');

			names = addname.split(',');
			var num = Math.floor(Math.random()*20+1);
			console.log('순회횟수 랜덤:'+num);
			var game = new CustomHotPotato('.person_list',num);
			game.addList();
			game.viewList();

			$('button').click(function(){
				game.gameStart();
			});
		})
		</pre>
	</section>
	<footer>
		<address>Jewdri . 출처 : Learning Javascript Data Structures and Algorithms</address>
	</footer>
</div>
</body>
</html>